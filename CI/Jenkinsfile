pipeline {

	agent any
	
	stages {
		stage('Checkout')
		{
		    steps {			
				checkout([
                        $class                             : 'GitSCM'
                        , branches                         : [[name: "origin/master"]]
                        , doGenerateSubmoduleConfigurations: false
                        , extensions                       : [[$class: 'CleanBeforeCheckout']]
                        , submoduleCfg                     : []
                        , userRemoteConfigs                : [[
                                                                      url: 'https://github.com/iecat/BFF.git'
                                                              ]]
                ])
		    }
		}
		stage('Install packages') {
			steps {
				sh 'npm install'
			}
		}
		stage ('Test')
		{
		    steps {
    			echo "test -----"
    			sh 'node -v'
    			sh 'npm prune'
    			sh 'npm install'
    			sh 'npm test'
		    }
		}
		
		stage ('Build')
		{
			steps {
				echo ' building the app' 
				sh 'npm run build'
			}
		}
		
		stage ('Publish')
		{
			steps {
				echo 'this step should do the publish'
			}
		}	
		
	}
	
}
